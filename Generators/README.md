# Ubicomp.Utils.NET.Generators

This project contains Roslyn Source Generators and Analyzers used to automate boilerplate code and enforce best practices within the Ubicomp.Utils.NET solution.

## Features

### 1. Auto-Discovery (Source Generator)
In the `MulticastTransportFramework`, messages are routed based on string IDs defined via the `[MessageType]` attribute. Historically, developers had to manually register each message type with the `TransportComponent`.

This generator automates that process by scanning the compilation for classes decorated with `[MessageType]`, and generating an extension method that registers them all at once.

#### Generated Code Example
```csharp
// <auto-generated/>
using System;
using Ubicomp.Utils.NET.MulticastTransportFramework;

namespace Ubicomp.Utils.NET.Generators.AutoDiscovery
{
    public static class TransportExtensions
    {
        public static void RegisterDiscoveredMessages(this TransportComponent component)
        {
            component.RegisterMessageType<MyNamespace.MyMessage>("my.message.id");
            // ... other discovered types
        }
    }
}
```

### 2. Message Type Analyzer (UbicompNET001)
*   **ID**: `UbicompNET001`
*   **Severity**: Warning
*   **Description**: Checks that any type passed to `TransportComponent.SendAsync<T>` is decorated with the `[MessageType]` attribute.
*   **Why**: Without this attribute, the auto-discovery mechanism cannot find the type, and the transport layer may fail to route it correctly if it hasn't been manually registered.

## Usage
The `TransportBuilder` automatically calls `RegisterDiscoveredMessages` via reflection (to avoid hard circular dependencies), ensuring that any message type defined in an assembly using this generator is automatically registered.
