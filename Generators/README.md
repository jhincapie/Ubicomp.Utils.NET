# Source Generators

The **Generators** project contains Roslyn Source Generators to automate boilerplate code for the `MulticastTransportFramework`.

## Features

### Auto-Discovery of Message Types
The `MessageTypeGenerator` scans your code for classes decorated with `[MessageType("id")]`. It generates an extension method `RegisterDiscoveredMessages` on `TransportComponent`. This ensures that the framework can deserialize incoming messages of these types, even if no explicit handler is registered (e.g., when observing the raw message stream).

**Input Code:**
```csharp
[MessageType("app.login")]
public class LoginMessage { ... }
```

**Generated Code:**
```csharp
// <auto-generated/>
namespace Ubicomp.Utils.NET.Generators.AutoDiscovery
{
    public static class TransportExtensions
    {
        public static void RegisterDiscoveredMessages(this TransportComponent component)
        {
            component.RegisterMessageType<LoginMessage>("app.login");
        }
    }
}
```

This method is automatically called by `TransportBuilder.Build()`, ensuring you never forget to register a message type.

### Legacy Analyzer
This project also contains `MessageTypeAnalyzer` (ID: `UbicompNET001`), which is considered legacy. The primary analyzer implementation is located in the `Analyzers` project (ID: `UBI001`).

## Dependencies
*   `Microsoft.CodeAnalysis.CSharp`
*   `Microsoft.CodeAnalysis.Analyzers`
